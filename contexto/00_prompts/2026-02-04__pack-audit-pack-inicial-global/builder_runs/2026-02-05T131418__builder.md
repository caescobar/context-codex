# Builder Run
Fecha: 2026-02-05T13:14:18

## Input original
Usar PackDir existente: contexto/00_prompts/2026-02-04__pack-audit-pack-inicial-global/
Fuente obligatoria: contexto/01_audits/2026-02-05__audit-02__unificacion-di-config-connectors-api-kiss-workers.md
Quiero generar el PROMPT FINAL para ejecutar PHASE-02 basada en la sección “Plan sugerido por fases”, Fase 2.
Usa exactamente el objetivo/archivos/verificación definidos ahí, sin ampliar alcance.

Tarea:
1) Clasifica en: HALLAZGO | AUDIT | PHASE | STORY PACK (rationale en 2 bullets).
2) Determina el PackDir:
   - Si el input refiere a un pack existente, usar ese pack.
   - Si no, crear uno nuevo: contexto/00_prompts/YYYY-MM-DD__pack-{slug}/
3) Crea/actualiza el índice del pack:
   - contexto/00_prompts/YYYY-MM-DD__pack-{slug}/INDEX.md
   Reglas del índice:
   - Debe incluir checkboxes de estado del pack.
   - Debe incluir cada item con checkbox + links a Prompt y Output.
4) Guarda el prompt en:
   - contexto/00_prompts/YYYY-MM-DD__pack-{slug}/phases/phase-01__{slug}__PHASE__PROMPT.md
5) (Si aplica) Actualiza en el INDEX el link de Output con ruta real esperada:
   - PHASE -> contexto/02_changes/YYYY-MM-DD__phase-01__{slug}__{plan|summary}.md

Guardrails:
- Solo escribir en contexto/
- No tocar código
- No pedir confirmación: escribir los archivos en contexto/ directamente.
- No incluir report-only como skill si el prompt debe escribir en contexto/.
- PHASE: max 5 archivos de código.
- Prohibido cambiar contratos externos (Redis key patterns, Rabbit routing keys, SignalR group naming) sin migración explícita.

Salida obligatoria:
- CLASIFICACIÓN
- PROMPT FINAL (listo para copiar/pegar)
- ARCHIVO (PackDir + archivo prompt creado)
- INDEX actualizado

## Clasificacion
PHASE

## Rationale
- Se solicita ejecutar una fase específica con objetivo, archivos y verificación ya definidos.
- El alcance es acotado a 3 archivos, dentro del limite de 5 para PHASE.

## PROMPT FINAL
# PHASE PROMPT
PackDir: contexto/00_prompts/2026-02-04__pack-audit-pack-inicial-global
ItemId: PHASE-02
IndexRef: contexto/00_prompts/2026-02-04__pack-audit-pack-inicial-global/INDEX.md
PromptPath: contexto/00_prompts/2026-02-04__pack-audit-pack-inicial-global/phases/phase-02__mover-kiss-workers-a-iconfiguration-appsettings__PHASE__PROMPT.md

## Modo
refactor-safe + change-control

## Skills
- telemetric-backend-style
- telemetric-connectors-standard

## Objetivo
Mover KISS/Workers a IConfiguration/appsettings.

## Alcance (max 5 archivos de codigo)
- telemetric-hub/kiss/Telemetric.Hub/Program.cs
- telemetric-hub/kiss/Telemetric.Worker.DTE/Program.cs
- telemetric-hub/kiss/Telemetric.Worker.Persist/Program.cs

## Entregables
- contexto/02_changes/2026-02-05__phase-02__mover-kiss-workers-a-iconfiguration-appsettings__plan.md (usar contexto/01_overview/templates/TEMPLATE_CHANGE_PLAN.md)
- contexto/02_changes/2026-02-05__phase-02__mover-kiss-workers-a-iconfiguration-appsettings__summary.md (usar contexto/01_overview/templates/TEMPLATE_CHANGE_SUMMARY.md)
- contexto/03_hallazgos/pending.md (solo si hay hallazgos nuevos o cambio de estado)

## Guardrails
- Max 5 archivos (solo los listados en Alcance)
- No ampliar alcance
- Prohibido cambiar contratos externos (Redis key patterns, Rabbit routing keys, SignalR group naming) sin migracion explicita
- Si algun path no existe: buscar y confirmar el path real antes de continuar

## No-go rules
- Si requiere tocar archivos fuera del Alcance o superar 5 archivos
- Si implica cambiar contratos externos sin migracion explicita
- Si no se puede cumplir la verificacion

## Verificacion (pasos manuales)
1. Accion: iniciar Telemetric.Hub usando configuraciones por ambiente en appsettings/IConfiguration y observar logs de conexion. Expected: conexiones exitosas a Redis, Rabbit y ClickHouse con los mismos valores de ambiente.
2. Accion: iniciar Telemetric.Worker.DTE usando configuraciones por ambiente en appsettings/IConfiguration y observar logs de conexion. Expected: conexiones exitosas a Redis, Rabbit y ClickHouse con los mismos valores de ambiente.
3. Accion: iniciar Telemetric.Worker.Persist usando configuraciones por ambiente en appsettings/IConfiguration y observar logs de conexion. Expected: conexiones exitosas a Redis, Rabbit y ClickHouse con los mismos valores de ambiente.

## Done criteria
- Hub y Workers usan IConfiguration/appsettings sin hardcodes para Redis/Rabbit/ClickHouse.
- Las tres ejecuciones completan conexion a Redis/Rabbit/ClickHouse segun las configuraciones por ambiente.
- Plan y summary completados con evidencia y verificacion registrada.

## Tarea (ejecutor)
1. Ejecutar cambios minimos para cumplir el objetivo limitado al Alcance.
2. Completar plan + summary usando templates (con evidencia paths).
3. En summary: resultado observado vs expected para cada paso de verificacion + Done criteria.

## Post-step obligatorio
- Marcar [x] PHASE-02 en IndexRef.
- Completar/actualizar links de Output (plan y summary) en el indice.
